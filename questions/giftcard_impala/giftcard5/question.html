<pl-question-panel>
<markdown>
For our last step we will test the sad path of `Customer#pay` and factor out 
common lines of test code to keep things DRY. We will use the same double, 
but this time we will instruct it to always return a falsy value so we can test 
the other code path in `#pay`. Since setting up the double (and the 
`Customer` instance) are common to both test cases, we should move them into a 
`before` block as we did with `GiftCard`, and group the related examples and 
their `before` block in a `describe`.  
  
```ruby
class Customer
  attr_accessor :name, :gift_card
  def initialize(name, gift_card=nil)
    @gift_card = gift_card
    @name = name
  end
  def pay(amount)
    if gift_card.withdraw(amount)
      self.notify("payment successful")
    else
      self.notify("purchase cannot be completed")
    end
  end
end
```

In this question, construct tests that verify:
* a payment from a Customer has a giftcard with sufficient balance notifies the customer of the successful transaction
* a payment from a Customer has a giftcard with insufficient balance notifies the customer of the unsuccessful transaction

For autograder feedback, make sure your tests are named as follows:
```ruby
'Customer trying to buy notifies customer if balance covers payment'
'Customer trying to buy notifies customer if balance does not cover payment'
```
---
</markdown>

</pl-question-panel>


<pl-file-editor
    file-name="giftcard_spec.rb"
    ace-mode="ace/mode/ruby"
>
describe Customer do
  describe 'trying to buy' do
    # YOUR CODE HERE
  end
end
</pl-file-editor>
<pl-external-grader-results></pl-external-grader-results>
